<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>File Manipulator</title>
    <link rel="stylesheet" href="index.css" />
  </head>
  <body>
    <h1>File Manipulator</h1>

    <button id="upload-btn">Upload File</button>

    <h3>Original File Data</h3>
    <div class="modified_data">
      <label
        >Text Value
        <input type="text" id="original_text_value" readonly />
      </label>
      <label
        >Creation Date
        <input type="text" id="original_creation_date" readonly />
      </label>
      <label
        >Last Changed Date
        <input type="text" id="original_last_changed_date" readonly />
      </label>
      <label
        >Last Use Date
        <input type="text" id="original_last_use_date" readonly />
      </label>
    </div>

    <h3>Edit your File here</h3>
    <div class="modified_data">
      <label
        >Text Value
        <input type="text" id="modified_text_value" readonly />
      </label>
      <label
        >Creation Date
        <input type="text" id="modified_creation_date" />
      </label>
      <label
        >Last Changed Date
        <input type="text" id="modified_last_changed_date" value="" />
      </label>
      <label
        >Last Use Date
        <input type="text" id="modified_last_use_date" />
      </label>
    </div>

    <button id="modify-btn">Modify File</button>

    <script>
      const uploadButton = document.getElementById("upload-btn");
      let creationDate = document.getElementById("original_creation_date");
      let textValue = document.getElementById("original_text_value");
      let lastChanged = document.getElementById("original_last_changed_date");
      let lastUsed = document.getElementById("original_last_use_date");

      async function updateLastEdited(filePath) {
        const now = new Date("1980-01-01");
        await fs.utimes(filePath, now, now);
      }

      uploadButton.addEventListener("click", () => {
        const input = document.createElement("input");
        input.type = "file";
        input.accept = ".txt,.jpg,.png,.gif";

        input.addEventListener("change", () => {
          const file = input.files[0];

          window.api.send("originalFile", file.path);

          window.api.receiveOnce("originalFileReply", (data) => {
            console.log("Recieved: ",data)
            lastUsed.value = data.lastUsed;
            creationDate.value = data.creationDate;
            lastChanged.value = data.lastChanged;
            textValue.value = data.textValue;
            
           
          });
        });

        input.click();
      });
    </script>
  </body>
</html>
